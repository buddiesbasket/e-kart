<main class="px-0 m-0">
    <!-- Hero Section -->
    <section class="hero-section position-relative overflow-hidden">
        <div class="container pb-5">
            <div class="row align-items-center">
                <div class="col-lg-6">
                    <h1 class="display-4 fw-bold mb-4">Elevate Your Shopping Experience</h1>
                    <p class="lead mb-4">Discover premium products curated just for you. Fast delivery, easy returns,
                        and exceptional quality.</p>
                    <button class="btn btn-dark btn-lg px-4 py-2" routerLink="/products">Shop Now</button>
                </div>
                <div class="col-lg-6 d-none d-lg-block">
                    <img [src]="utilService.heroImage" alt="Modern shopping" class="img-fluid rounded-3 shadow">
                </div>
            </div>
        </div>
        <div class="wave-divider">
            <svg viewBox="0 0 1200 120" preserveAspectRatio="none">
                <path
                    d="M0,0V46.29c47.79,22.2,103.59,32.17,158,28,70.36-5.37,136.33-33.31,206.8-37.5C438.64,32.43,512.34,53.67,583,72.05c69.27,18,138.3,24.88,209.4,13.08,36.15-6,69.85-17.84,104.45-29.34C989.49,25,1113-14.29,1200,52.47V0Z"
                    opacity=".25" fill="currentColor"></path>
                <path
                    d="M0,0V15.81C13,36.92,27.64,56.86,47.69,72.05,99.41,111.27,165,111,224.58,91.58c31.15-10.15,60.09-26.07,89.67-39.8,40.92-19,84.73-46,130.83-49.67,36.26-2.85,70.9,9.42,98.6,31.56,31.77,25.39,62.32,62,103.63,73,40.44,10.79,81.35-6.69,119.13-24.28s75.16-39,116.92-43.05c59.73-5.85,113.28,22.88,168.9,38.84,30.2,8.66,59,6.17,87.09-7.5,22.43-10.89,48-26.93,60.65-49.24V0Z"
                    opacity=".5" fill="currentColor"></path>
                <path
                    d="M0,0V5.63C149.93,59,314.09,71.32,475.83,42.57c43-7.64,84.23-20.12,127.61-26.46,59-8.63,112.48,12.24,165.56,35.4C827.93,77.22,886,95.24,951.2,90c86.53-7,172.46-45.71,248.8-84.81V0Z"
                    fill="currentColor"></path>
            </svg>
        </div>
    </section>

    <!-- Featured Categories -->
    <section class="py-5">
        <div class="container">
            <h2 class="text-center mb-5">Shop by Category</h2>
            <div class="row g-4">
                @for (category of utilService.featuredCategories; track category.id) {
                <div class="col-md-4">
                    <div class="card category-card h-100 border-0 shadow-sm rounded-3 overflow-hidden"
                        (click)="navigateToCategory(category.id)">
                        <div class="card-header p-0">
                            <img [src]="category.image" class="card-img-top" [alt]="category.name">
                        </div>
                        <div class="card-body text-center">
                            <h5 class="card-title">{{category.name}}</h5>
                            <p class="text-muted">{{category.count}} products</p>
                        </div>
                    </div>
                </div>
                }
            </div>
        </div>
    </section>

    <!-- Popular Products -->
    <section class="py-5 bg-light">
        <div class="container">
            <div class="d-flex justify-content-between align-items-center mb-5">
                <h2 class="mb-0">Trending Now</h2>
                <a routerLink="/products" class="btn btn-outline-dark">View All</a>
            </div>
            <div class="row g-4">
                @for (product of featuredProducts(); track product.id) {
                <div class="col-md-6 col-lg-3">
                    <div class="card product-card h-100 border-0 shadow-sm rounded-3 overflow-hidden">
                        <div class="position-relative">
                            <img [src]="product.thumbnail" class="card-img-top" [alt]="product.title">
                            <div class="card-actions">
                                <button class="btn btn-dark rounded-circle" (click)="addToWishlist(product)">
                                    <i class="bi bi-heart"></i>
                                </button>
                                <button class="btn btn-dark rounded-circle"
                                    (click)="quickView(product, quickViewModal)">
                                    <i class="bi bi-eye"></i>
                                </button>
                            </div>
                            <div class="badge bg-danger position-absolute top-0 end-0 m-2">
                                -{{product.discount}}%</div>
                        </div>
                        <div class="card-body">
                            <div class="d-flex justify-content-between">
                                <h5 class="card-title mb-1">{{product.title}}</h5>
                                <div class="text-warning">
                                    <i class="bi bi-star-fill"></i>
                                    {{product.rating}}
                                </div>
                            </div>
                            <p class="text-muted small">{{product.brand}}</p>
                            <div class="d-flex justify-content-between align-items-center">
                                <h6 class="mb-0">${{product.price | number:'1.2-2'}}</h6>
                                <button class="btn btn-sm btn-outline-dark" (click)="addToCart(product)">Add to
                                    Cart</button>
                            </div>
                        </div>
                    </div>
                </div>
                }
            </div>
        </div>
    </section>

    <!-- Customer Reviews -->
    <section class="py-5">
        <div class="container">
            <h2 class="text-center mb-5">What Our Customers Say</h2>
            <div class="row g-4">
                @for (review of utilService.customerReviews; track review.name) {
                <div class="col-md-4">
                    <div class="card h-100 border-0 shadow-sm rounded-3">
                        <div class="card-body">
                            <div class="d-flex mb-3">
                                <div class="flex-shrink-0">
                                    <img [src]="review.avatar" alt="Customer" class="rounded-circle" width="50">
                                </div>
                                <div class="flex-grow-1 ms-3">
                                    <h6 class="mb-0">{{review.name}}</h6>
                                    <div class="text-warning small">
                                        @for (star of [1,2,3,4,5]; track star) {
                                        <i class="bi bi-star-fill" [class.text-muted]="star > review.rating"></i>
                                        }
                                    </div>
                                </div>
                            </div>
                            <p class="card-text">{{review.comment}}</p>
                        </div>
                        <div class="card-footer bg-transparent border-top-0">
                            <small class="text-muted">Posted on {{review.date}}</small>
                        </div>
                    </div>
                </div>
                }
            </div>
        </div>
    </section>

    <!-- Brands Section -->
    <section class="py-5 bg-light mb-3">
        <div class="container">
            <h2 class="text-center mb-5">Brands We Trust</h2>
            <div class="row g-4 align-items-center justify-content-center">
                @for (brand of utilService.brands; track brand.name) {
                <div class="col-6 col-md-3 col-lg-2">
                    <div class="brand-logo p-3 d-flex align-items-center justify-content-center">
                        <img [src]="brand.logo" [alt]="brand.name" class="img-fluid" loading="lazy" width="100"
                            height="100" [alt]="brand.name">
                    </div>
                </div>
                }
            </div>
        </div>
    </section>

    <!-- Newsletter -->
    <section class="py-5 bg-dark text-white mb-3">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-6 text-center">
                    <h2 class="mb-3">Stay Updated</h2>
                    <p class="mb-4">Subscribe to our newsletter for the latest products, deals, and news.</p>
                    <form class="d-flex">
                        <input type="email" class="form-control rounded-0" placeholder="Your email address">
                        <button type="submit" class="btn btn-light rounded-0 px-4">Subscribe</button>
                    </form>
                </div>
            </div>
        </div>
    </section>   
</main>

<!-- Quick View Modal -->
<ng-template #quickViewModal let-modal>
    @if(selectedProduct){
    <div class="modal-header border-0">
        <h5 class="modal-title">{{selectedProduct.title}}</h5>
        <button type="button" class="btn-close" (click)="modal.dismiss()"></button>
    </div>
    <div class="modal-body">
        <div class="row">
            <div class="col-md-6">
                <img [src]="selectedProduct.thumbnail" [alt]="selectedProduct.title" class="img-fluid rounded-3">
            </div>
            <div class="col-md-6">
                <div class="d-flex justify-content-between align-items-start mb-3">
                    <div>
                        <h4>{{selectedProduct.title}}</h4>
                        <p class="text-muted">{{selectedProduct.brand}}</p>
                    </div>
                    <div class="text-warning">
                        <i class="bi bi-star-fill"></i>
                        {{selectedProduct.rating}}
                    </div>
                </div>
                <p>{{selectedProduct.description}}</p>
                <div class="d-flex align-items-center mb-3">
                    <h3 class="mb-0 me-2">${{selectedProduct.price | number:'1.2-2'}}</h3>
                    <span class="text-danger">
                        <del>${{(selectedProduct.price / (1 - (selectedProduct.discount/100))) |
                            number:'1.2-2'}}</del>
                        ({{selectedProduct.discount}}% off)
                    </span>
                </div>
                <div class="d-flex mb-4">
                    <div class="input-group me-3" style="width: 120px;">
                        <button class="btn btn-outline-dark" type="button" (click)="decrementQuantity()">-</button>
                        <input type="text" class="form-control text-center" [(ngModel)]="quantity" readonly>
                        <button class="btn btn-outline-dark" type="button" (click)="incrementQuantity()">+</button>
                    </div>
                    <button class="btn btn-dark flex-grow-1" (click)="addToCart(selectedProduct)">Add to Cart</button>
                </div>
                <div class="border-top pt-3">
                    <p class="small text-muted mb-1"><i class="bi bi-truck me-2"></i> Free delivery on orders over $50
                    </p>
                    <p class="small text-muted"><i class="bi bi-arrow-left-right me-2"></i> 30-day return policy</p>
                </div>
            </div>
        </div>
    </div>
    }
</ng-template>